/*! For license information please see main.8e302834704d181a7191.bundle.js.LICENSE.txt */
(()=>{var e,t={180:(e,t,s)=>{"use strict";s(260);class i{constructor(e,t){this.scene=e,this.animationData=t,this.createGameAnimations()}createGameAnimations(){for(let e of this.animationData.anims){let t,s=[];if("generateFrameNames"===e.frames.typeOfGeneration)t=this.scene.anims.generateFrameNames(e.frames.key,{prefix:e.frames.prefix||"",start:e.frames.start||0,end:e.frames.end||0,suffix:e.frames.suffix||"",zeroPad:e.frames.zeroPad||0,frames:e.frames.frames||!1});else if("generateFrameNumbers"===e.frames.typeOfGeneration)t=this.scene.anims.generateFrameNumbers(e.frames.key,{start:e.frames.start||0,end:e.frames.end||-1,first:e.frames.first||!1,frames:e.frames.frames||!1});else for(let t of e.frames){let e={key:t.key,frame:t.frame,duration:t.duration||0,visible:t.visible};s.push(e)}this.scene.anims.create({key:e.key,frames:t||s,defaultTextureKey:e.defaultTextureKey||null,frameRate:e.frameRate||24,duration:e.duration,skipMissedFrames:e.skipMissedFrames||!0,delay:e.delay||0,repeat:e.repeat||0,repeatDelay:e.repeatDelay||0,yoyo:e.yoyo||!1,showOnStart:e.showOnStart||!1,hideOnComplete:e.hideOnComplete||!1})}}}class a extends Phaser.Scene{constructor(){super({key:"BootScene"})}preload(){this.cameras.main.setBackgroundColor(10016391),this.createLoadingbar(),this.load.on("progress",(e=>{this.progressBar.clear(),this.progressBar.fillStyle(16774867,1),this.progressBar.fillRect(this.cameras.main.width/4,this.cameras.main.height/2-16,this.cameras.main.width/2*e,16)}),this),this.load.on("complete",(()=>{this.animationHelperInstance=new i(this,this.cache.json.get("animationJSON")),this.progressBar.destroy(),this.loadingBar.destroy()}),this),this.load.pack("preload","./assets/pack.json","preload")}update(){this.scene.start("MenuScene")}createLoadingbar(){this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(6139463,1),this.loadingBar.fillRect(this.cameras.main.width/4-2,this.cameras.main.height/2-18,this.cameras.main.width/2+4,20),this.progressBar=this.add.graphics()}}class n extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture),this.initVariables(e),this.initImage(),this.initPhysics(),this.scene.add.existing(this)}initVariables(e){this.bulletSpeed=e.bulletProperties.speed,this.bulletAnimation=new class{constructor(e){this.source=e,this.scene=e.scene,this.initEmitter(),this.createHitEmitter()}initEmitter(){this.hitEmitterManager=this.scene.add.particles("blue")}createHitEmitter(){this.hitEmitter=this.hitEmitterManager.createEmitter({speed:{min:100,max:200},angle:{start:0,end:360,steps:30},scale:{start:.1,end:0},lifespan:300,blendMode:"ADD",on:!1})}playHitEmitter(){let e=this.source.x,t=this.source.y;this.hitEmitter.explode(30,e,t)}}(this)}initImage(){this.setOrigin(.5,.5)}initPhysics(){this.scene.physics.world.enable(this),this.body.setVelocityY(this.bulletSpeed),this.body.setSize(1,8)}update(){(this.y<0||this.y>this.scene.sys.canvas.height)&&this.destroy()}explode(){this.stopBullet(),this.bulletAnimation.playHitEmitter(),this.scene.time.delayedCall(500,(()=>{this.destroy()}))}stopBullet(){this.body.setVelocity(0,0),this.scene.physics.world.disable(this),this.setVisible(!1)}}class h extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture),this.initVariables(),this.initImage(),this.initInput(),this.initPhysics(),this.scene.add.existing(this),this.relifeAnimation.playGoUpTween()}getBullets(){return this.bullets}initVariables(){this.bullets=this.scene.add.group({runChildUpdate:!0}),this.lastShoot=0,this.flyingSpeed=100,this.relifeAnimation=new class{constructor(e){this.target=e,this.scene=e.scene,this.createGoUpTween(),this.createBlinkTween()}createGoUpTween(){this.target instanceof h&&(this.goUpTween=this.scene.add.tween({targets:this.target,ease:"Power1",y:{from:this.scene.sys.canvas.height+10,to:this.scene.sys.canvas.height-40},duration:2e3,repeat:0,paused:!0}))}createBlinkTween(){this.target instanceof h&&(this.blinkTween=this.scene.add.tween({targets:this.target,alpha:0,duration:500,repeat:2,yoyo:!0,paused:!0}))}playGoUpTween(){this.goUpTween.play()}playBlinkTween(){this.blinkTween.play()}play(){this.playGoUpTween(),this.playBlinkTween()}}(this)}initImage(){this.setOrigin(.5,.5)}initInput(){this.cursors=this.scene.input.keyboard.createCursorKeys(),this.shootingKey=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE)}initPhysics(){this.scene.physics.world.enable(this),this.body.setSize(13,8)}update(){this.handleFlying(),this.handleShooting()}handleFlying(){this.cursors.right.isDown&&this.x<this.scene.sys.canvas.width-this.width/2?this.body.setVelocityX(this.flyingSpeed):this.cursors.left.isDown&&this.x>this.width/2?this.body.setVelocityX(-this.flyingSpeed):this.body.setVelocityX(0)}handleShooting(){this.shootingKey.isDown&&this.scene.time.now>this.lastShoot&&this.bullets.getLength()<1&&(this.bullets.add(new n({scene:this.scene,bulletProperties:{speed:-300},x:this.x,y:this.y-this.height,texture:"bullet"})),this.lastShoot=this.scene.time.now+500)}gotHurt(){let e=this.scene.registry.get("lives");this.scene.registry.set("lives",e-1),this.scene.events.emit("livesChanged"),this.resetPosition()}resetPosition(){this.x=this.scene.sys.canvas.width/2,this.relifeAnimation.play()}}class r extends Phaser.GameObjects.Sprite{constructor(e){super(e.scene,e.x,e.y,e.texture),this.initVariables(e.texture),this.initImage(),this.initPhysics(),this.initTweens(),this.scene.add.existing(this)}getBullets(){return this.bullets}initVariables(e){switch(this.bullets=this.scene.add.group({maxSize:10,runChildUpdate:!0}),this.enemyType=e,this.hurtingTime=200,this.isHurt=!1,this.hitAnimation=new class{constructor(e){this.target=e,this.scene=e.scene,this.createDownTween(),this.createUpTween()}createUpTween(){(this.target instanceof r||this.target instanceof h)&&(this.upTween=this.scene.add.tween({targets:this.target,y:{from:this.target.y,to:this.target.y-7},duration:200,paused:!0,yoyo:!0,repeat:0}))}createDownTween(){(this.target instanceof r||this.target instanceof h)&&(this.downTween=this.scene.add.tween({targets:this.target,y:{from:this.target.y,to:this.target.y+7},duration:200,paused:!0,yoyo:!0,repeat:0}))}playHitUp(){this.upTween.play()}playHitDown(){this.downTween.play()}}(this),this.enemyType){case"octopus":this.dyingTime=100,this.enemyTint=16777215,this.lives=1,this.reloadTime=9e3,this.valueKill=20;break;case"crab":this.dyingTime=120,this.enemyTint=4367530,this.lives=2,this.reloadTime=1e4,this.valueKill=40;break;case"squid":this.dyingTime=140,this.enemyTint=4869709,this.lives=2,this.reloadTime=12e3,this.valueKill=60}}initImage(){this.setOrigin(.5,.5),this.setActive(!0),this.setTint(this.enemyTint)}initPhysics(){this.scene.physics.world.enable(this),this.body.setSize(12,8)}initTweens(){this.moveTween=this.scene.tweens.add({targets:this,x:this.x+50,ease:"Power0",duration:6e3,yoyo:!0,repeat:-1})}update(){this.active?(this.anims.play(this.enemyType+"Fly",!0),0===Phaser.Math.RND.between(0,this.reloadTime)&&this.bullets.add(new n({scene:this.scene,bulletProperties:{speed:100},x:this.x,y:this.y,texture:"bullet"})),this.isHurt&&(this.setTint(16550517),this.setScale(.8),this.setAlpha(.8),this.hurtingTime>0?this.hurtingTime-=10:(this.setTint(this.enemyTint),this.setScale(1),this.setAlpha(1),this.isHurt=!1,this.hurtingTime=200))):(this.anims.play(this.enemyType+"Dead"),this.dyingTime>0?this.dyingTime-=10:(this.addPoints(),this.destroy()))}gotHurt(){this.hitAnimation.playHitUp(),this.lives-=1,0===this.lives?this.setActive(!1):this.isHurt=!0}addPoints(){let e=this.scene.registry.get("points");this.scene.registry.set("points",e+this.valueKill),this.scene.events.emit("pointsChanged")}}class o extends Phaser.Scene{constructor(){super({key:"GameScene"}),this.bulletHitEnemy=(e,t)=>{e instanceof n&&t instanceof r&&(e.explode(),t.gotHurt())},this.bulletHitPlayer=(e,t)=>{e instanceof n&&t instanceof h&&(e.explode(),t.gotHurt())}}init(){this.enemies=this.add.group({runChildUpdate:!0})}create(){this.player=new h({scene:this,x:this.sys.canvas.width/2,y:this.sys.canvas.height+10,texture:"player"});for(let e=0;e<5;e++)for(let t=0;t<10;t++){let s;s=0===e?"squid":1===e||2===e?"crab":"octopus",this.enemies.add(new r({scene:this,x:20+15*t,y:50+15*e,texture:s}))}}update(){this.player.active&&(this.player.update(),this.enemies.children.each((e=>{e instanceof r&&(e.update(),e.getBullets().getLength()>0&&this.physics.overlap(e.getBullets(),this.player,this.bulletHitPlayer))}),this),this.checkCollisions()),(this.registry.get("lives")<0||0===this.enemies.getLength())&&(this.scene.start("MenuScene"),this.scene.stop("HUDScene"))}checkCollisions(){this.physics.overlap(this.player.getBullets(),this.enemies,this.bulletHitEnemy)}}class l extends Phaser.Scene{constructor(){super({key:"HUDScene"})}init(){this.bitmapTexts=[]}create(){this.bitmapTexts.push(this.add.bitmapText(10,this.scene.systems.canvas.height-20,"font",`Lives: ${this.registry.get("lives")}`,8)),this.bitmapTexts.push(this.add.bitmapText(10,10,"font",`Points: ${this.registry.get("points")}`,8));const e=this.scene.get("GameScene");e.events.on("pointsChanged",this.updatePoints,this),e.events.on("livesChanged",this.updateLives,this)}updatePoints(){this.bitmapTexts[1].setText(`Points: ${this.registry.get("points")}`)}updateLives(){this.bitmapTexts[0].setText(`Lives: ${this.registry.get("lives")}`)}}class c extends Phaser.Scene{constructor(){super({key:"MenuScene"}),this.bitmapTexts=[]}init(){this.startKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.startKey.isDown=!1,this.initRegistry()}create(){this.bitmapTexts.push(this.add.bitmapText(this.sys.canvas.width/2-65,this.sys.canvas.height/2,"font","PRESS S TO PLAY",8)),this.bitmapTexts.push(this.add.bitmapText(this.sys.canvas.width/2-60,this.sys.canvas.height/2-40,"font","SPACE INVADERS",8))}update(){this.startKey.isDown&&(this.scene.start("HUDScene"),this.scene.start("GameScene"),this.scene.bringToTop("HUDScene"))}initRegistry(){this.registry.set("points",0),this.registry.set("lives",3),this.registry.set("level",1)}}const d={title:"Space Invaders",url:"https://github.com/digitsensitive/phaser3-typescript",version:"2.0",width:224,height:240,zoom:3,type:Phaser.AUTO,parent:"game",scene:[a,c,o,l],input:{keyboard:!0},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},backgroundColor:"#f5cc69",render:{pixelArt:!0,antialias:!1}};class p extends Phaser.Game{constructor(e){super(e)}}window.addEventListener("load",(()=>{new p(d)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}};return t[e].call(n.exports,n,n.exports,i),n.exports}i.m=t,e=[],i.O=(t,s,a,n)=>{if(!s){var h=1/0;for(c=0;c<e.length;c++){for(var[s,a,n]=e[c],r=!0,o=0;o<s.length;o++)(!1&n||h>=n)&&Object.keys(i.O).every((e=>i.O[e](s[o])))?s.splice(o--,1):(r=!1,n<h&&(h=n));if(r){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,a,n]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,n,[h,r,o]=s,l=0;if(h.some((t=>0!==e[t]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(o)var c=o(i)}for(t&&t(s);l<h.length;l++)n=h[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(c)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i.O(void 0,[216],(()=>i(180)));var a=i.O(void 0,[216],(()=>i(204)));a=i.O(a)})();